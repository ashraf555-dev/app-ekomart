import{c as e,n as t,t as n}from"./index-LR6X8NeB.js";import{d as r,m as i,p as a}from"./gi-CgWg_qRv.js";import{n as o}from"./alerts-C3RXIXtm.js";import"./react-BcTN3v1I.js";import{a as s,i as c,n as l,r as u,t as d}from"./useUser-CzEk3LV1.js";import{n as f,t as p}from"./infoStripData-DBZJSG4G.js";import{n as m,t as h}from"./ListRowSkeleton-BKuwgqhX.js";import{t as g}from"./delay-dIBi35z2.js";var _=e(),v=n();function y({value:e,min:t=1,max:n=99,onIncrease:i,onDecrease:o,onChange:s,disabled:c=!1,className:l=``}){let u=Number(e),d=u>t,f=n===void 0||u<n;return(0,v.jsxs)(`div`,{className:`
        inline-flex items-center border border-gray-300 rounded-lg overflow-hidden
        ${l}
      `.trim(),children:[(0,v.jsx)(`button`,{type:`button`,"aria-label":`Decrease quantity`,disabled:c||!d,onClick:()=>{o?o():s&&d&&s(u-1)},className:`p-2 text-(--main-color) hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition`,children:(0,v.jsx)(r,{className:`w-3 h-3`})}),(0,v.jsx)(`span`,{className:`min-w-[2.5rem] text-center font-medium py-1`,children:u}),(0,v.jsx)(`button`,{type:`button`,"aria-label":`Increase quantity`,disabled:c||!f,onClick:()=>{i?i():s&&f&&s(u+1)},className:`p-2 text-(--main-color) hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition`,children:(0,v.jsx)(a,{className:`w-3 h-3`})})]})}var b=2500,x=3;function S({item:e}){let t=s(e=>e.removeItem),n=s(e=>e.incrementQuantity),r=s(e=>e.decrementQuantity),a=e.price*e.qty,c=()=>{t(e.id),o()};return(0,v.jsxs)(`div`,{className:`flex flex-col items-center sm:flex-row gap-4 py-6 border-b border-gray-200 last:border-0`,children:[(0,v.jsx)(`div`,{className:`w-full sm:w-28 h-28 rounded-lg overflow-hidden bg-gray-100 shrink-0`,children:(0,v.jsx)(`img`,{src:e.image,alt:e.title,className:`w-full h-full object-cover`})}),(0,v.jsxs)(`div`,{className:`flex-1 flex flex-col gap-1.5 min-w-0`,children:[(0,v.jsx)(`h3`,{className:`font-semibold text-(--secondary-color) line-clamp-2 text-lg`,children:e.title}),(0,v.jsx)(`p`,{className:`text-(--gray-color) text-sm mt-1`,children:e.category}),(0,v.jsxs)(`p`,{className:`mt-2 font-semibold text-(--main-color)`,children:[l(e.price),` each`]})]}),(0,v.jsxs)(`div`,{className:`flex items-center gap-4 sm:ml-auto`,children:[(0,v.jsx)(y,{value:e.qty,min:1,max:e.stock,onIncrease:()=>n(e.id),onDecrease:()=>r(e.id)}),(0,v.jsx)(`p`,{className:`min-w-20 text-right font-semibold text-(--secondary-color)`,children:l(a)}),(0,v.jsx)(`button`,{type:`button`,"aria-label":`Remove from cart`,onClick:c,className:`p-2 text-red-600 hover:bg-red-50 rounded-lg transition focus:outline-none focus:ring-2 focus:ring-red-300`,children:(0,v.jsx)(i,{className:`w-5 h-5`})})]})]})}function C(){let e=d(),n=s(e=>e.items),r=s(u),i=s(c),[a,o]=(0,_.useState)(!0);return(0,_.useEffect)(()=>{if(!e){o(!1);return}let t=!1;return o(!0),g(b).finally(()=>{t||o(!1)}),()=>{t=!0}},[e]),(0,v.jsxs)(`section`,{className:`my-16 gap-12 pt-20 flex flex-col justify-between items-center min-h-max`,children:[(0,v.jsxs)(`div`,{className:`w-full max-w-330 mx-auto flex flex-col gap-12 px-3 xl:px-24`,children:[(0,v.jsx)(`h1`,{className:`text-4xl font-bold text-(--secondary-color) mb-8`,children:`Shopping Cart`}),e?a?(0,v.jsx)(`div`,{className:`bg-(--white-color) rounded-xl border border-gray-200 p-4 sm:p-6`,children:Array.from({length:x},(e,t)=>(0,v.jsx)(h,{},t))}):n.length===0?(0,v.jsxs)(`div`,{className:`py-16 text-center`,children:[(0,v.jsx)(`p`,{className:`text-(--gray-color) text-lg mb-6`,children:`Your cart is empty.`}),(0,v.jsx)(t,{to:`/shop`,className:`inline-block rounded-md bg-(--main-color) px-6 py-3 text-sm font-semibold text-(--white-color) hover:bg-(--secondary-color) transition`,children:`Continue shopping`})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(`div`,{className:`bg-(--white-color) rounded-xl border border-gray-200 p-4 sm:p-6 card-grid-fade-in`,children:n.map(e=>(0,v.jsx)(S,{item:e},e.id))}),(0,v.jsxs)(`div`,{className:`mt-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4`,children:[(0,v.jsx)(t,{to:`/shop`,className:`inline-block rounded-md border-2 border-(--main-color) px-6 py-3 text-sm font-semibold text-(--main-color) hover:bg-(--main-color) hover:text-(--white-color) transition text-center`,children:`Continue shopping`}),(0,v.jsxs)(`div`,{className:`flex flex-col sm:items-end gap-2`,children:[(0,v.jsxs)(`p`,{className:`text-(--gray-color)`,children:[(0,v.jsx)(`span`,{className:`font-semibold text-(--secondary-color)`,children:r}),` `,`item`,r===1?``:`s`]}),(0,v.jsxs)(`p`,{className:`text-xl font-bold text-(--main-color)`,children:[`Subtotal : `,l(i)]}),(0,v.jsx)(t,{to:`/cart`,className:`inline-block rounded-md bg-(--main-color) px-6 py-3 text-lg font-semibold text-(--white-color) hover:bg-(--secondary-color) transition text-center`,children:`Proceed to checkout`})]})]})]}):(0,v.jsx)(m,{message:`Please log in or create an account to view and manage your cart.`})]}),(0,v.jsx)(f,{items:p,containerClassName:`mt-16`})]})}export{C as default};