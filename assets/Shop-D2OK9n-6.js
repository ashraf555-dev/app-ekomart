import{c as e,t}from"./index-LR6X8NeB.js";import"./gi-CgWg_qRv.js";import"./fa-zBTRbhkA.js";import"./alerts-C3RXIXtm.js";import"./react-BcTN3v1I.js";import"./useUser-CzEk3LV1.js";import"./wishlistStore-CPn5jShH.js";import{n,t as r}from"./infoStripData-DBZJSG4G.js";import{t as i}from"./delay-dIBi35z2.js";import{n as a,r as o,t as s}from"./ProductCardSkeleton-Bni33xmE.js";var c=e(),l=t(),u=8,d=2500,f=[{value:`name`,label:`Name A–Z`},{value:`nameDesc`,label:`Name Z–A`},{value:`priceAsc`,label:`Price: Low to High`},{value:`priceDesc`,label:`Price: High to Low`}];function p(e,t,n,r){let i=e;if(t.trim()){let e=t.trim().toLowerCase();i=i.filter(t=>t.title.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e)||t.category&&t.category.toLowerCase().includes(e))}return n&&(i=i.filter(e=>e.category===n)),[...i].sort((e,t)=>{switch(r){case`name`:return(e.title||``).localeCompare(t.title||``);case`nameDesc`:return(t.title||``).localeCompare(e.title||``);case`priceAsc`:return(e.price??0)-(t.price??0);case`priceDesc`:return(t.price??0)-(e.price??0);default:return 0}})}function m(){let[e,t]=(0,c.useState)([]),[m,h]=(0,c.useState)(!0),[g,_]=(0,c.useState)(null),[v,y]=(0,c.useState)(``),[b,x]=(0,c.useState)(``),[S,C]=(0,c.useState)(`name`);(0,c.useEffect)(()=>{let e=!1;return h(!0),_(null),Promise.all([o(),i(d)]).then(([n])=>{e||t(n)}).catch(t=>{e||_(t?.message??`Failed to load products.`)}).finally(()=>{e||h(!1)}),()=>{e=!0}},[]);let w=(0,c.useMemo)(()=>{let t=new Set;return e.forEach(e=>e.category&&t.add(e.category)),[``,...Array.from(t).sort()]},[e]),T=(0,c.useMemo)(()=>p(e,v,b||null,S),[e,v,b,S]);return(0,l.jsxs)(`section`,{className:`my-16 gap-12 pt-20 flex flex-col justify-between items-center min-h-max`,children:[(0,l.jsxs)(`div`,{className:`w-full max-w-330 mx-auto flex flex-col gap-12 px-3 xl:px-24`,children:[(0,l.jsxs)(`h1`,{className:`text-5xl font-bold text-(--secondary-color) mb-6`,children:[`All `,(0,l.jsx)(`span`,{className:`text-(--main-color)`,children:`Products`})]}),(0,l.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-4 mb-8 flex-wrap`,children:[(0,l.jsxs)(`div`,{className:`flex-1 min-w-50`,children:[(0,l.jsx)(`label`,{htmlFor:`shop-search`,className:`sr-only`,children:`Search products`}),(0,l.jsx)(`input`,{id:`shop-search`,type:`search`,placeholder:`Search by name, description, category...`,value:v,onChange:e=>y(e.target.value),className:`w-full h-12 px-4 rounded-md border border-gray-300 bg-(--white-color) outline-none focus:ring-2 focus:ring-(--main-color) focus:border-transparent transition`})]}),(0,l.jsxs)(`div`,{className:`flex gap-3 flex-wrap`,children:[(0,l.jsx)(`label`,{htmlFor:`shop-category`,className:`sr-only`,children:`Filter by category`}),(0,l.jsxs)(`select`,{id:`shop-category`,value:b,onChange:e=>x(e.target.value),className:`h-12 px-4 rounded-md border border-gray-300 bg-(--white-color) outline-none focus:ring-2 focus:ring-(--main-color) min-w-45 transition`,children:[(0,l.jsx)(`option`,{value:``,children:`All categories`}),w.filter(Boolean).map(e=>(0,l.jsx)(`option`,{value:e,children:e},e))]}),(0,l.jsx)(`label`,{htmlFor:`shop-sort`,className:`sr-only`,children:`Sort by`}),(0,l.jsx)(`select`,{id:`shop-sort`,value:S,onChange:e=>C(e.target.value),className:`h-12 px-4 rounded-md border border-gray-300 bg-(--white-color) outline-none focus:ring-2 focus:ring-(--main-color) min-w-45 transition`,children:f.map(e=>(0,l.jsx)(`option`,{value:e.value,children:e.label},e.value))})]})]}),m&&(0,l.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6`,children:Array.from({length:u},(e,t)=>(0,l.jsx)(s,{},t))}),g&&(0,l.jsx)(`div`,{className:`py-20 text-center`,children:(0,l.jsx)(`p`,{className:`text-red-600 font-medium`,children:g})}),!m&&!g&&T.length===0&&(0,l.jsxs)(`div`,{className:`py-20 text-center text-(--gray-color)`,children:[(0,l.jsx)(`p`,{className:`text-lg mb-4`,children:`No products match your filters.`}),(0,l.jsx)(`button`,{type:`button`,onClick:()=>{y(``),x(``)},className:`text-(--main-color) font-semibold hover:underline focus:outline-none focus:ring-2 focus:ring-(--main-color) rounded px-2 py-1`,children:`Clear filters`})]}),!m&&!g&&T.length>0&&(0,l.jsx)(`div`,{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 card-grid-fade-in`,children:T.map(e=>(0,l.jsx)(a,{product:e},e.id))})]}),(0,l.jsx)(n,{items:r})]})}export{m as default};